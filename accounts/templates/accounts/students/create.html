{% extends 'theme/base.html' %}

{% block body_content %}

    <div class="flex items-start space-y-2 md:space-y-0 md:space-x-4">

        <!-- Create Student form-->
        <form action={% url 'accounts:createStudentPage' %} method="post" class="flex flex-col space-y-2 w-full lg:flex-grow rounded-md border border-sky-200 p-4">
            {% csrf_token %}
            
            <div class="w-full mt-4 mb-2 flex justify-end">
                <button
                    type="submit"
                    class="flex items-center justify-center space-x-4 rounded-md bg-sky-800 text-white py-2 px-8 text-center hover:bg-sky-700"
                >
                <i class="material-icons">add</i>
                    <span class="text-neutral-100 font-bold">
                    Ajouter
                    </span>
                </button>
            </div>
    
            <hr />
    
            <div class="w-full flex flex-col space-y-2 justify-center">
                <label for="user" class="block mb-2 text-sm font-medium text-gray-900">Choisir un Utilisateur</label>
                <div class="w-full flex items-center space-x-3 bg-red-400">
                    <select id="user" name="user" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:focus:ring-blue-500 dark:focus:border-blue-500">
                        {% for user in users %}
                            <option value={{ user.pk }}>{{ user.username }}</option>
                        {% endfor %}
                    </select>
                    <button
                        type="button"
                        class="btn btn-outline-primary btn-floating btn-lg"
                        data-mdb-ripple-color="dark"
                        data-mdb-toggle="modal" 
                        data-mdb-target="#add_user"
                        >
                        <i class="fas fa-add"></i>
                    </button>
                </div>
            </div>

            
            <div class="grid gap-6 mb-6 lg:grid-cols-2">
                <div>
                    <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900">Prenom</label>
                    <input type="text" id="first_name" name="first_name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="" required="">
                </div>
                <div>
                    <label for="last_name" class="block mb-2 text-sm font-medium text-gray-900">Nom</label>
                    <input type="text" id="last_name" name="last_name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="" required="">
                </div>
                <div>
                    <label for="program" class="block mb-2 text-sm font-medium text-gray-900">Programme</label>
                    <select name="program" id="program" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:focus:ring-blue-500 dark:focus:border-blue-500">
                        <option value="mic">Multimedia</option>
                        <option value="tr">Telecom. & Reseaux</option>
                    </select>
                </div>
                <div>
                    <label for="level" class="block mb-2 text-sm font-medium text-gray-900">Niveau</label>
                    <select name="level" id="level" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:focus:ring-blue-500 dark:focus:border-blue-500">
                        <option value="first_year">1ere Annee</option>
                        <option value="second_year">2eme Annee</option>
                        <option value="third_year">Licence</option>
                        <option value="fourth_year">Master 1</option>
                        <option value="fift_year">Master 2</option>
                    </select>
                </div>
                <div>
                    <label for="nationality" class="block mb-2 text-sm font-medium text-gray-900">Nationalite</label>
                    <input type="text" id="nationality" name="nationality" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Senegalaise" required="">
                </div>
                <div>
                    <label for="phone" class="block mb-2 text-sm font-medium text-gray-900">Tel</label>
                    <input type="tel" id="phone" name="phone" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="+221-7X-XXX-XX-XX" pattern="+221-7{7,6,8,5}-[0-9]{3}-[0-9]{2}-[0-9]{2}" required="">
                </div>
                <div>
                    <label for="address" class="block mb-2 text-sm font-medium text-gray-900">Adresse</label>
                    <input type="text" id="address" name="address" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Yeumbeul, rue 5 villa xxx" required="">
                </div>
                <div>
                    <label for="sexe" class="block mb-2 text-sm font-medium text-gray-900">Sexe</label>
                    <select name="sexe" id="sexe" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:focus:ring-blue-500 dark:focus:border-blue-500">
                        <option value="male">Masculin</option>
                        <option value="female">Feminin</option>
                    </select>
                </div>
                <div class="mb-6">
                    <label for="email" class="block mb-2 text-sm font-medium text-gray-900">Email</label>
                    <input type="email" id="email" name="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="student@gmail.com" required="">
                </div>
                <div>
                    <label for="ended_at" class="block mb-2 text-sm font-medium text-gray-900">Fini le</label>
                    <input type="date" id="ended_at" name="ended_at" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="" required="">
                </div>
            </div>

            <div class="flex justify-center items-center w-full">
                <label for="dropzone-file" class="flex flex-col justify-center items-center w-full h-64 bg-gray-50 rounded-lg border-2 border-gray-300 border-dashed cursor-pointer hover:bg-gray-100">
                    <div class="flex flex-col justify-center items-center pt-5 pb-6">
                        <svg aria-hidden="true" class="mb-3 w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
                        <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Choisir une image</span> or glisser, deposer</p>
                        <p class="text-xs text-gray-500">SVG, PNG, JPG or GIF (MAX. 800x400px)</p>
                    </div>
                    <input id="dropzone-file" name="photo" type="file" class="hidden">
                </label>
            </div> 

            
        </form>
        <!--- End Create Student form-->

    </div>
    

    <!-- Modal -->
    <div class="modal fade" id="add_user" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Nouveau Utilisateur</h5>
            <button type="button" data-mdb-dismiss="modal" aria-label="Close">
                <i class="fas fa-close"></i>
            </button>
            </div>
            <div class="modal-body">
                <!-- Create User account form -->
                <form action={% url 'accounts:registerPage' %} id="user_add_form" method="post" class="flex flex-col space-y-2 w-full p-2">
                    {% csrf_token %}            
                    <div class="w-full flex flex-col space-y-2 justify-center">
                        <label for="username" class="">Nom d'utilisateur</label>
                        <input
                            type="text"
                            id="username"
                            name="username"
                            class="rounded-md outline-none px-4 py-1.5 border-sky-700 focus:border-sky-800 appearance-none focus:outline-none bg-neutral-100 focus:bg-white"
                        />
                    </div>
            
                    <div class="w-full flex flex-col space-y-2 justify-end">
                        <label for="username" class="">Mot de Passe</label>
                        <input
                            type="password"
                            id="password1"
                            name="password1"
                            class="rounded-md outline-none px-4 py-1.5 border-sky-700 focus:border-sky-800 appearance-none focus:outline-none bg-neutral-100 focus:bg-white"
                        />
                    </div>
            
                    <div class="w-full flex flex-col space-y-2 justify-end">
                        <label for="username" class="">Mot de Passe Confirmation</label>
                        <input
                            type="password"
                            id="password2"
                            name="password2"
                            class="rounded-md outline-none px-4 py-1.5 border-sky-700 focus:border-sky-800 appearance-none focus:outline-none bg-neutral-100 focus:bg-white"
                        />
                    </div>
                </form>
        <!--- End Create User account form-->
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-mdb-dismiss="modal">Fermer</button>
            <button type="button" class="btn btn-outline-primary" onclick="submit(this)" >Enregistrer</button>
            </div>
        </div>
        </div>
    </div>

{% endblock body_content %}

{% block javascripts %}
    <script>
        function submit () {
            document.getElementById("user_add_form").submit();
        }
    </script>
{% endblock javascripts %}